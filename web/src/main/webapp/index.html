<!--  - "https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.9.0/feather.min.js"-->
<!--  - "https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"-->
<!doctype html>
<html lang="en">
  <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta name="description" content="">
      <meta name="author" content="Neil Avery">
      <meta name="generator" content="Jekyll v3.8.6">
      <title>Precognito Search</title>

      <!-- Bootstrap core CSS -->
      <link href="css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

      <link href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css" rel="stylesheet"
            crossorigin="anonymous">


      <!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
      <link rel="stylesheet" href="css/jquery.fileupload.css"  crossorigin="anonymous"/>
      <link rel="stylesheet" href="css/jquery.fileupload-ui.css"  crossorigin="anonymous"/>

<!--      <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">-->
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">

      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/frappe-charts/1.3.0/frappe-charts.min.css" crossorigin="anonymous">

      <link href="https://unpkg.com/vue-bootstrap-typeahead/dist/VueBootstrapTypeahead.css" rel="stylesheet">

      <!-- Favicons -->
      <link rel="icon" href="img/favicon.ico">
      <meta name="msapplication-config" content="img/favicons/browserconfig.xml">
      <meta name="theme-color" content="#563d7c">


      <style>
          .bd-placeholder-img {
              font-size: 1.125rem;
              text-anchor: middle;
              -webkit-user-select: none;
              -moz-user-select: none;
              -ms-user-select: none;
              user-select: none;
          }

          @media (min-width: 768px) {
              .bd-placeholder-img-lg {
                  font-size: 3.5rem;
              }
          }
      </style>
      <!-- Custom styles for this template -->
      <link href="css/dashboard.css" rel="stylesheet">
  </head>
  <body>

    <nav class="navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow">
        <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="https://github.com/liquidlabsio/precognito" target="_blank" style="padding:8px">
            <img class="" src="img/precog-wide-w.png" alt="" width="160">
        </a>

        <input class="form-control form-control-dark w-100" type="text" placeholder="Search" aria-label="Search">
        <ul class="navbar-nav px-3">
            <li class="nav-item text-nowrap">
                <a id="signout" class="nav-link" href="#">Sign out</a>
            </li>
        </ul>
        <div id="spinnerHome">
            <div class="spinner spinner-border text-primary"></div>
        </div>

    </nav>

    <div class="container-fluid">
        <div class="row">
            <nav id="sideNav" class="col-md-2 d-none d-md-block bg-light sidebar">
                <div class="sidebar-sticky">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active compressed" href="#" data-target="explorerTab">
                                <span data-feather="layers"></span>
                                <span class="sr-only">(current)</span>
                            </a>
                            <a class="nav-link active expanded" href="#" data-target="explorerTab">
                                <span data-feather="layers"></span>
                                Explore <span class="sr-only">(current)</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active compressed" href="#" data-target="searchTab">
                                <span data-feather="search"></span>
                                <span class="sr-only"></span>
                            </a>
                            <a class="nav-link active expanded" href="#" data-target="searchTab">
                                <span data-feather="search"></span>
                                Search <span class="sr-only"></span>
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link compressed" href="#" data-target="importTab">
                                <span data-feather="upload-cloud"></span>
                            </a>
                            <a class="nav-link expanded" href="#" data-target="importTab">
                                <span data-feather="upload-cloud"></span>
                                Import
                            </a>

                        </li>
                        <li class="nav-item">
                            <a class="nav-link compressed" href="#">
                                <span data-feather="bar-chart-2"></span>
                            </a>
                            <a class="nav-link expanded" href="#">
                                <span data-feather="bar-chart-2"></span>
                                Reports
                            </a>

                        </li>
                        <li class="nav-item">
                            <a class="nav-link compressed" href="#">
                                <span data-feather="home"></span>
                            </a>
                            <a class="nav-link expanded" href="#">
                                <span data-feather="home"></span>
                                Integrations
                            </a>

                        </li>
                    </ul>

                    <h7 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted compressed">
                        <span class="compressed">...</span>
                        <a class="d-flex align-items-center text-muted compressed" href="#" aria-label="Add a new report">
                        </a>
                    </h7>

                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted expanded">
                        <span class="expanded">Configuration</span>
                        <a class="d-flex align-items-center text-muted expanded" href="#" aria-label="Add a new report">
                            <span class="expanded" data-feather="plus-circle"></span>
                        </a>
                    </h6>
                    <ul class="nav flex-column mb-2">
                        <li class="nav-item">
                            <a class="nav-link compressed" href="#" data-target="configuration">
                                <span data-feather="settings"></span>
                            </a>
                            <a class="nav-link expanded" href="#" data-target="configuration">
                                <span data-feather="settings"></span>
                                Installation
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="compressed" id="expandNav" href="#">
                                <span data-feather="chevrons-right"></span>
                            </a>
                            <a class="expanded" id="compressNav" href="#">
                                <span data-feather="chevrons-left"></span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <main role="main" id="mainPanel" class="col-md-10 ml-sm-auto col-lg-10 px-4">
                <div id="explorerTab" class="mainPanelTab" style="display: none;">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Explore</h1>

                        <div class="btn-toolbar mb-2 mb-md-0">
                            <div class="btn-group mr-2">
                                <button id="refreshFiles" type="button" class="btn btn-sm btn-outline-secondary">Refresh</button>
                                <button  type="button" class="btn btn-sm btn-outline-secondary">Upload</button>
                                <button  type="button" class="btn btn-sm btn-outline-secondary">Share</button>
                            </div>
                            <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle">
                                <span data-feather="calendar"></span>
                                This week
                            </button>
                        </div>

                    </div>
                    <div class="table-responsive" >
                        <table id="explorerFileListTable" class="table table-striped table-sm">
                            <thead>
                            <tr>
                                <th>Name</th>
                                <th>Tags</th>
                                <th>Host</th>
                                <th>Size</th>
                                <th>From</th>
                                <th>To</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                        </table>
                    </div>
                        <h5 id="explorerOpenFileName">Filename: []</h5>
                        <a class="zoomExplorer" data-zoom="in" href="#">
                            <span data-feather="zoom-in"></span>
                        </a>
                        <a class="zoomExplorer" data-zoom="out" href="#">
                            <span data-feather="zoom-out"></span>
                        </a>
                  <div id="explorerEditor" class="normalSizeEditor">
                  </div>
                </div>

                <div id="searchTab" class="mainPanelTab" style="display: none;">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Search</h1>


                        <div class="btn-toolbar mb-2 mb-md-0">
                            <div class="btn-group mr-2">
                                <button id="refreshFilesSearch" type="button" class="btn btn-sm btn-outline-secondary">Refresh</button>
                                <button  type="button" class="btn btn-sm btn-outline-secondary">Share</button>
                            </div>
                            <button id="searchDurationSelector" type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span data-feather="calendar"></span>
                                Last hour
                            </button>
                            <div class="dropdown-menu" aria-labelledby="searchDurationSelector">
                                <a class="search-duration-dropdown dropdown-item" href="#" data-duration="60">Last
                                    hour</a>
                                <a class="search-duration-dropdown dropdown-item" href="#" data-duration="120">2
                                    hours</a>
                                <a class="search-duration-dropdown dropdown-item" href="#" data-duration="360">6
                                    hours</a>
                                <a class="search-duration-dropdown dropdown-item" href="#" data-duration="720">12
                                    hours</a>
                                <a class="search-duration-dropdown dropdown-item" href="#" data-duration="1440">1
                                    day</a>
                                <a class="search-duration-dropdown dropdown-item" href="#" data-duration="2880">2
                                    days</a>
                                <a class="search-duration-dropdown dropdown-item" href="#" data-duration="10080">7
                                    days</a>
                                <a class="search-duration-dropdown dropdown-item" href="#" data-duration="43200">30
                                    days</a>
                                <a class="search-duration-dropdown dropdown-item" href="#" data-duration="86400">60
                                    days</a>
                                <a class="search-duration-dropdown dropdown-item" href="#" data-duration="129600">90
                                    days</a>
                                <a class="search-duration-dropdown dropdown-item" href="#" data-duration="259200">180
                                    days</a>
                                <a class="search-duration-dropdown dropdown-item" href="#" data-duration="2259200">All
                                    time</a>
                            </div>
                        </div>
                    </div>


                    <form id="searchInputForm" class="form-row">
                        <div class="form-group col-md-2" id="bucketFilterWrapper">
                            <label class="control-label">Bucket | Tags</label>
                            <vue-bootstrap-typeahead
                                    v-model="query"
                                    :data="completes"
                                    placeholder="*"
                            ></vue-bootstrap-typeahead>
                        </div>
                        <div class="form-group col-md-2" id="fileFilterWrapper">
                            <label class="control-label">Filename</label>
                            <vue-bootstrap-typeahead
                                    v-model="query"
                                    :data="completes"
                                    placeholder="*"
                            ></vue-bootstrap-typeahead>
                        </div>
                        <div class="form-group col-md-3" id="recordFilterWrapper">
                            <label class="control-label">Record Match</label>
                            <vue-bootstrap-typeahead
                                    v-model="query"
                                    :data="completes"
                                    placeholder="*"
                            ></vue-bootstrap-typeahead>
                        </div>
                        <div class="form-group col-md-2" id="fieldExtractWrapper">
                            <label class="control-label">Field Extract</label>
                            <vue-bootstrap-typeahead
                                    v-model="query"
                                    :data="completes"
                                    placeholder="*"
                            ></vue-bootstrap-typeahead>
                        </div>
                        <div class="form-group col-md-2"  id="analyticExtractWrapper">
                            <label class="control-label">Analytic</label>
                            <vue-bootstrap-typeahead
                                    v-model="query"
                                    :data="completes"
                                    placeholder="*"
                            ></vue-bootstrap-typeahead>
                        </div>
                        <div class="form-group col-md-1">
                            <label class="control-label">&nbsp;</label>
                            <button id="searchSubmit" class="btn btn-primary form-control" v-on:click="searchSubmit">
                                <span data-feather="search"></span>
                            </button>

                        </div>


                    </form>
<!--                    <div class="input-group mb-3">-->
<!--                        <input id="searchInput" v-model="searchExpression" type="text" class="form-control" placeholder="bucket | host | tags | filename | lineMatch | fieldExtractor | analytic " aria-label="" aria-describedby="basic-addon2">-->
<!--                        <div class="input-group-append">-->
<!--                            <button id="searchSubmit" class="btn btn-primary" v-on:click="searchSubmit">-->
<!--                                <span data-feather="search"></span>-->
<!--                            </button>-->
<!--                        </div>-->
<!--                    </div>-->

                    <div id="searchResultsChart">
                        {{ stats }}
                    </div>
                    <div id="searchChart">
                        <apexchart type="bar" height="350" :options="chartOptions" :series="series" v-on:click="click"></apexchart>
                    </div>
                    <a class="searchZoom" data-zoom="in" href="#">
                        <span data-feather="zoom-in"></span>
                    </a>
                    <a class="searchZoom" data-zoom="out" href="#">
                        <span data-feather="zoom-out"></span>
                    </a>
                    <div id="searchResultsEditor" class="normalSizeEditor"></div>
                </div>


                <div id="importTab"  class="mainPanelTab" style="display: none;">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Import</h1>
                    </div>
                    <div id="fileUploaderPanel">

                        <div id="accordion">
                            <div class="card">
                                <div class="card-header" id="headingOne">
                                    <h5 class="mb-0">
                                        <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                            Upload local files to Tenant Storage
                                        </button>
                                    </h5>
                                </div>

                                <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
                                    <div class="card-body">

                                        <form
                                                id="fileuploadForm"
                                                action="https://NOOO/"
                                                method="POST"
                                                enctype="multipart/form-data"
                                        >
                                            <div class="col-lg-12" >

                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text file-upload-label" id="uploadResourceInputPP">
                                                            Resource Identifier
                                                        </span>
                                                    </div>
                                                    <input  name="resource" class="form-control"  type="text" id="uploadResourceInput"
                                                            placeholder="Provide a resource, host or device name"
                                                            aria-label="Resource Identifier" aria-describedby="uploadResourceInputPP">
                                                </div>

                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text file-upload-label" id="uploadTagsInputPP">
                                                            Tags
                                                        </span>
                                                    </div>

                                                    <input name="tags"  type="text" class="form-control" id="uploadTagsInput"
                                                           placeholder="Enter a comma separated list of tags"
                                                           aria-label="Resource Identifier" aria-describedby="uploadTagsInputPP">
                                                </div>

                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text file-upload-label">Upload</span>
                                                    </div>
                                                    <div class="custom-file">
                                                        <input type="file" name="fileContent" class="custom-file-input" id="fileupload" multiple >
                                                        <label class="custom-file-label" for="fileupload">Choose files</label>
                                                    </div>
                                                </div>

                                            </div>

                                            <br>
                                            <div id="files-list"></div>

                                        </form>

                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-header" id="headingTwo">
                                    <h5 class="mb-0">
                                        <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                            Import from storage (S3, GFS, Azure Storage)
                                        </button>
                                    </h5>
                                </div>
                                <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                                    <div class="card-body">
                                        <form
                                                id="dataImportForm"
                                        >
                                            <div class="col-lg-12" >

                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text file-upload-label" id="importResourceInputPP">
                                                            Resource Identifier
                                                        </span>
                                                    </div>
                                                    <input  name="resource" class="form-control"  type="text" id="importResourceInput"
                                                            placeholder="Storage resource name (S3 bucket name etc)"
                                                            aria-label="Resource Identifier" aria-describedby="importResourceInputPP">
                                                </div>

                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text file-upload-label" id="importTagsInputPP">
                                                            Tags
                                                        </span>
                                                    </div>

                                                    <input name="tags"  type="text" class="form-control" id="importTagsInput"
                                                           placeholder="Comma separated list of tags for labelling"
                                                           aria-label="Resource Identifier" aria-describedby="importTagsInputPP">
                                                </div>

                                                <!-- file mask -->
                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text file-upload-label"
                                                              id="importFileIncludeInputPP">
                                                            File includes
                                                        </span>
                                                    </div>

                                                    <input name="fileIncludes" type="text" class="form-control"
                                                           id="importFileIncludesInput"
                                                           placeholder="Partial file path or name: i.e. prod.log"
                                                           aria-label="File include filter"
                                                           aria-describedby="importFileIncludeInputPP">
                                                </div>
                                                <!-- path prefix -->
                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text file-upload-label"
                                                              id="importFilePrefixInputPP">
                                                            Prefix
                                                        </span>
                                                    </div>

                                                    <input name="filePrefix" type="text" class="form-control"
                                                           id="importFilePrefixInput"
                                                           placeholder="Start of the resource Path i.e. exportedData"
                                                           aria-label="Path prefix"
                                                           aria-describedby="importFilePrefixInputPP">
                                                </div>
                                                <!-- age -->
                                                <div class="input-group mb-3">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text file-upload-label"
                                                              id="importFileAgeInputPP">
                                                            Age days
                                                        </span>
                                                    </div>

                                                    <input name="fileAge" type="text" class="form-control"
                                                           id="importFileAgeInput"
                                                           placeholder="Include data less than days old - 0 to ignore"
                                                           aria-label="Age days"
                                                           aria-describedby="importFileAgeInputPP">
                                                </div>

                                                <button id="importFromStorageButton" class="btn btn-primary"
                                                        data-toggle="tooltip"
                                                        title="Import making storage data accessible without copying and filtered by tags">
                                                    Import
                                                </button>
                                                <button id="removeFromStorageButton" class="btn btn-warning"
                                                        data-toggle="tooltip"
                                                        title="Removes references imported data leaving source data untouched">
                                                    Remove imported
                                                </button>
                                            </div>
                                            <br>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div id="configuration"  class="mainPanelTab" style="display: none;">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Installation Settings (read-only)</h1>
                    </div>
                    <div>
                        <form class="form-group">
                            <div class="col-lg-12">
                                <div class="form-group">
                                    <label for="tenantInfo">Tenant Identity</label>
                                    <input  name="resource"  type="text" class="form-control" id="tenantInfo"  placeholder="">
                                </div>
                                <div class="form-group">
                                    <label for="restAPIInfo">REST API</label>
                                    <input name="tags"  type="text" class="form-control" id="restAPIInfo" aria-describedby="" placeholder="Address of the REST API being used" title="">
                                </div>
                                <div class="form-group">
                                    <label for="swaggerRestAPIInfo">Swagger REST API Web</label>
                                    <input name="tags"  type="text" class="form-control" id="swaggerRestAPIInfo" aria-describedby="" placeholder="Address of the Web based REST API" title="">
                                </div>

                            </div>

                            <br>
                        </form>


                    </div>
                </div>

            </main>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>

    <script>
        if (typeof jQuery == 'undefined') {
            document.write(unescape("%3Cscript src='/js/jquery-3.2.1.min.js' type='text/javascript'%3E%3C/script%3E"));
        }
    </script>
    <script src="js/vendor/bootstrap.bundle.min.js"
            integrity="sha384-6khuMg9gaYr5AxOqhkVIODVIvm9ynTT5J4V1cfthmT+emCG6yVmEZsRHdxlotUnm"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.9.0/feather.min.js" crossorigin="anonymous"></script>

    <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js" crossorigin="anonymous"></script>


    <!-- ace ui text editor CDN from https://pagecdn.com/lib/ace -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.7/ace.js" crossorigin="anonymous"
            integrity="sha256-C7DTYRJLG+B/VEzHGeoPMw699nsTQYPAXHKXZb+q04E="></script>
    <script src="https://pagecdn.io/lib/ace/1.4.7/theme-monokai.js" crossorigin="anonymous"></script>
    <script src="https://pagecdn.io/lib/ace/1.4.7/theme-twilight.js" crossorigin="anonymous"></script>
    <script src="https://pagecdn.io/lib/ace/1.4.7/worker-javascript.js" crossorigin="anonymous"></script>
    <script src="https://pagecdn.io/lib/ace/1.4.7/worker-json.js" crossorigin="anonymous"></script>


    <!-- gzip decompression -->
    <script src="https://cdn.jsdelivr.net/pako/1.0.3/pako.min.js" crossorigin="anonymous"></script>

    <!-- file upload ui -->
    <script src="js/vendor/jquery.ui.widget.js"></script>
    <script src="js/vendor/jquery.iframe-transport.js"></script>
    <script src="js/vendor/jquery.fileupload.js"></script>

    <!-- VUE stuff -->


    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.min.js" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/apexcharts" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue-apexcharts" crossorigin="anonymous"></script>


    <script src="https://unpkg.com/vue-bootstrap-typeahead" crossorigin="anonymous"></script>


    <!-- Precognito files -->
    <script src="js/pubsub.js"></script>
    <script src="js/precognito.js"></script>
    <script src="js/backend.js"></script>
    <script src="js/explorer.js"></script>

    <script src="js/search-vue.js"></script>
    <script src="js/search.js"></script>
    <script src="js/search-backend.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/uploader.js"></script>

  </body>
</html>